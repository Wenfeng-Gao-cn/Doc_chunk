{
  "knowledge_trees": {
    "title": "",
    "content": "",
    "children": null
  },
  "source_doc": "",
  "source_file": "",
  "chunk_list": {
    "chunks": [
      {
        "title": "关于版权",
        "content": "广州云趣信息科技有限公司版权所有，受中国及其他国家商业法律及版权法保护，保留一切权利。未经本公司书面许可，任何单位和个人不得擅自摘抄、复制本书内容的部分或全部，并不得以任何形式传播。",
        "metadata": {
          "parent_path": [
            "声明"
          ],
          "full_path": [
            "声明",
            "关于版权"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "阅读约定",
        "content": "1.2阅读约定\n格式 意义\n加粗字体手册中，所有加粗的正文字体均表示关键字段。\n红色字体手册中，所有红色显示字体，均表示需要重点、需要特别关注的字段。\n< >手册中，所有带“<>”均表示按钮名，如“单击<确定>按钮”。\n[ ]带方括号“[]”表示窗口名、菜单名和数据表，如“弹出[新建用户]窗口”。\n/多级菜单及并行选项用“/”隔开。如[文件/新建/文件夹]多级菜单表示[文件]菜单下的[新建]子菜单下的[文件夹]菜单项。",
        "metadata": {
          "parent_path": [
            "声明"
          ],
          "full_path": [
            "声明",
            "阅读约定"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "编写目的",
        "content": "用于指导工程、测试人员安装部署语音机器人、进行简单的自检，以及常见问题的定位及解决。",
        "metadata": {
          "parent_path": [],
          "full_path": [
            "编写目的"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "名词解释",
        "content": "名词 解释\nTTS 全称Text-To-Speech，把文本转化成语音。\nASR 全称AutomaticSpeechRecognition，将声音转化成文本。\nMRCPServer全称MediaResourceControlProtocolServer，是向客户端提供各种语音服务（如语音识别、语音合成）的语音服务器。\nFAQ 全称frequently-askedquestions，即常见问题解答\nIVR 全称InteractiveVoiceResponse，即互动式语音应答",
        "metadata": {
          "parent_path": [],
          "full_path": [
            "名词解释"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "环境准备",
        "content": "4.1环境准备\n环境 状态\nMARS MARS已经准备就绪（建议使用最新发布的版本）\n数据库 数据库已经准备就绪（建议使用Mysql8版本）\nNLP NLP已经准备就绪（建议使用最新发布的版本）\n安装包路径：http://version.yunqu-info.com/version/4#--产品项目/4.5#--智能化产品安装包/智能AI产品业务模块/robot\n容器版路径：http://version.yunqu-info.com/version/4#--产品项目/4.5#--智能化产品安装包/智能AI产品业务模块/robot/容器版\nREDIS REDIS已经准备就绪（建议使用5.0.7版本），如需对接智能知识库，则需要跟智能知识库使用同一套redis\n磐石 “4.3磐石所需模块”中的模块已安装，且各模块功能正常\nNginx（非必要）Nginx已经准备就绪（若需要部署多个NLP，可安装Nginx进行负载均衡，若只需要单个NLP可不安装Nginx）",
        "metadata": {
          "parent_path": [
            "安装前准备"
          ],
          "full_path": [
            "安装前准备",
            "环境准备"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "开放的端口",
        "content": "4.2开放的端口\n服务 端口\nHTTPS 默认为443，如果是HTTP则默认端口为80\nMARS 9059、9060，可按需修改\nREDIS 6379，可按需修改\nNLP 8080，可按需修改\nNGINX 按需配置",
        "metadata": {
          "parent_path": [
            "安装前准备"
          ],
          "full_path": [
            "安装前准备",
            "开放的端口"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "磐石所需模块",
        "content": "模块名称 参考版本号\nTTS 7.21.12.7\nOCS_CLOUD7.22.10.08\nASRGW 7.23.03.10\nIVR 7.21.11.09\nCCS 7.23.03.23\nCallServer 7.23.03.23\nIPMG 7.22.12.27d\nMediaserver_dlg7.2.76(#BUILD_20230330)\nSBC 7.22.12.29\nDBA 6.0.9\n注意：最低支持这些版本及以上版本。",
        "metadata": {
          "parent_path": [
            "安装前准备"
          ],
          "full_path": [
            "安装前准备",
            "磐石所需模块"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "安装包简介",
        "content": "安装包列表如下：\n安装包名称 安装服务器 安装包描述\nfaqgateway.war NLP引擎服务器 FAQ知识库\nmk-robotagent.war NLP引擎服务器 IVR对接网关，处理IVR与语音机器人交互的业务数据\nmk-robotapi.war NLP引擎服务器 用于ASR转写、TTS合成\nmkrobotplugin.war NLP引擎服务器 机器人引擎插件模块，实现机器人对话、挂机、意图处理等具体业务逻辑\nbdunitgateway.war NLP引擎服务器 百度unit网关\nROBOT-DS.xml NLP引擎服务器 机器人jdbc配置文件\nfaqgateway.xml NLP引擎服务器 faqgateway模块的配置文件\nmk-robotagent.xml NLP引擎服务器 mk-robotagent模块的配置文件\nmk-robotapi.xml NLP引擎服务器 mk-robotapi模块的配置文件\nmkrobotplugin.xml NLP引擎服务器 mkrobotplugin模块的配置文件\nbdunitgateway.xml NLP引擎服务器 bdunitgateway模块的配置文件\ninstall_mysql_*整合版.sql 数据库脚本 robot库脚本，在robot库执行（需要根据数据库的类型选择对应的数据库脚本）\nmenu.sql 数据库脚本 语音机器人菜单脚本，在主库执行\ninstall_mysql_view_*.sql 数据库脚本 创建任务视图脚本，在robot库执行\nupdate_mysql*云电销修改脚本.sql 数据库脚本 云电销扫码外呼失败脚本，在业务库执行\nmk-robotext.war MarsNode所在服务器 静默坐席\nmk-robothelp.war MarsNode所在服务器 会话数据处理网关，用于实时监控处理机器人的会话业务数据\nmk-robotmgr.war MarsNode所在服务器 机器人业务配置管理端\nscanningFailedData.war MarsNode所在服务器 外呼失败扫描网关\nmk-robotvue.war MarsNode所在服务器 语音机器人VUE前端模块\naliyunttstool.war MarsNode所在服务器 阿里私有云tts语音合成模块\n注意：\n1、mkrobotplugin模块v2.0.9版本以前，纠错功能使用pycorrection模块，v2.0.9及以后版本纠错功能迁移到了mkrobotplugin模块，不需要安装pycorrection模块。\n2、百度Unit机器人包的路径在版本库如下位置：version/4#--产品项目/4.5#--智能化产品安装包/智能AI产品业务模块/语音机器人/百度unit机器人网关包（如未进行对接则无需安装）\n3、aliyunttstool模块，使用本地阿里私有化tts才需要部署，如可直接访问公网tts则不需部署，安装包路径在版本服务器：version/4#--产品项目/4.5#--智能化产品安装包/智能AI产品业务模块/阿里云TTS",
        "metadata": {
          "parent_path": [
            "安装前准备"
          ],
          "full_path": [
            "安装前准备",
            "安装包简介"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "机器人外呼需要的IVR流程",
        "content": "机器人外呼任务的实现，一共需要三个流程共同来完成。\n1.机器人外呼主流程ocsivrmainflow\n本流程的作用：机器人外呼任务发起，ocs_cloud将外呼呼通客户后，ocs_cloud将先启动主流程ocsivrmainflow，主流程通过MARS传来的业务子流程名(传参)，启动相应业务对应的机器人通用子流程。\n2.通用机器人外呼子流程AISales\n本流程作用：完成人机对话，向机器人网关请求问答内容，并按机器人要求向用户播放、收键，询问用户回复等，并同时向MARS侧实时反馈人机交互内容，最终在人机通话结束时向机器人及MARS发起通知，从机器人处取得营销结果并向MARS上送。\n3.静默坐席接管人机对话流程breakflow_toagent\n本流程作用：当机器人通用子流程在执行过程中收到MARS端的特殊处理请求时（如直接转接到静默坐席），将启动本流程作为机器人通用子流程的子流程进行处理，主要负责完成转到指定坐席的功能。\n本流程若转坐席成功，breakflow流程退出后原流程也将退出；本流程若转坐席不成功，breakflow流程退出后返回原机器人通用子流程流程的break中断点，继续处理。",
        "metadata": {
          "parent_path": [
            "机器人外呼交互流程"
          ],
          "full_path": [
            "机器人外呼交互流程",
            "机器人外呼需要的IVR流程"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "机器人外呼整体交互流程",
        "content": "交互流程说明：\n机器人外呼任务发起，ocs_cloud将外呼呼通客户后，ocs_cloud将先启动主流程ocsivrmainflow，主流程通过Mars传来的业务子流程名(传参)，启动相应业务对应的机器人通用子流程AISales。\n在AISales流程中，IVR先向NLP引擎的mk-robotagent模块传入用户文本（IVR流程里默认为“通用机器人”），mk-robotagent模块将用户文本发送给robotengine模块，robotengine模块将用户文本发送给mkrobotplugin模块，在mkrobotplugin模块进行纠错、识别意图。若能识别机器人卡片上除FAQ、其他以外的意图，则mkrobotplugin模块将结果返回给robotengine模块；若不能识别则在faqgateway模块检索问题库、寒暄库，若命中则返回FAQ给mkrobotplugin模块，若不能命中则返回其他意图给mkrobotplugin模块。mkrobotplugin模块再将结果返回给robotengine模块，robotengine模块将结果返回给mk-robotagent模块，mk-robotagent模块将结果返回给IVR。\nIVR向MarsMgr的yc-stdgw模块发送机器人对话内容、机器人营销状态（用于云电销的监控等页面的展示）。\n若mk-robotagent模块返回结果的动作是放音，若放音文件存在则播放音频文件，若放音文件文件名为空或者不存在，则IVR会使用TTS放音（TTS播放的文本内容为音频文件的内容），TTS会请求MRCPServer将文本转换为音频，MRCPServer将转换后的音频发送给MediaServer，MediaServer进行放音。IVR调用ASRGateway接收用户的回答，接收到用户的回答后ASRGateway请求MRCPServer识别用户的回答，ASRGateway将识别后的文本返回给IVR。IVR再将该文本发送给NLP引擎的mk-robotagent模块，重复2-18的步骤，直到通话结束。\n待通话结束后，IVR会向NLP引擎的mk-robotagent模块发送挂机请求，mk-robotagent模块会返回通话的录音文件名、挂机原因等通话信息，IVR再向MarsMgr的yc-stdgw模块发送录音文件名、挂机原因等通话信息。",
        "metadata": {
          "parent_path": [
            "机器人外呼交互流程"
          ],
          "full_path": [
            "机器人外呼交互流程",
            "机器人外呼整体交互流程"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "FREESWITCH场景",
        "content": "6大模型机器人业务流程\n6.1FREESWITCH场景\n6.1.1业务流程图\n语音机器人安装手册\n第17页共115页\n6.1.2IVR放音识别具体流程图\n大模型机器人业务流程描述：（验证步骤查看章节8机器人外呼业务配置及章节\n9大模型机器人）\n1、机器人外呼任务发起，ocs_cloud将外呼呼通客户后，ocs_cloud将先启动主流\n程ocsivrmainflow，主流程通过Mars传来的业务子流程名(传参)，启动相应业务\n对应的机器人通用子流程robotcall。\n2、在robotcall流程中，IVR先向NLP引擎的mk-robotagent模块传入用户文本\n（IVR流程里默认为“通用机器人”），mk-robotagent模块将用户文本发送给\nrobotengine模块，robotengine模块将用户文本发送给mkrobotplugin模块，在\nmkrobotplugin模块通过关键词跟话术处理用户意图：是否匹配大模型机器人的\n知识库（知识库知识通过faqgateway模块同步到大模型）\n3、mkrobotplugin模块去请求大模型，如用户话术匹配大模型知识库中的问答知\n识，大模型将提取问答知识对应的答案内容+Prompt指令中的主题话术返回给\nmkrobotplugin模块\n4、如用户话术匹配大模型知识库中的文档知识，大模型将提取到文档中相关答\n案+Prompt指令中的主题话术返回给mkrobotplugin模块\n5、如用户话术未能匹配到机器人知识库，大模型根据根据Prompt指令生成合适\n语音机器人安装手册\n第18页共115页的话术内容返回给mkrobotplugin模块\n6、mkrobotplugin模块最终将结果返回给robotengine模块，robotengine模块将结\n果返回给mk-robotagent模块，mk-robotagent模块将结果返回给IVR\n7、IVR向MarsMgr的yc-stdgw模块发送机器人对话内容、机器人营销状态（用\n于云电销的监控等页面的展示）。\n8、若mk-robotagent模块返回结果的动作是放音，若放音文件存在，则播放录音\n文件。IVR->callserver->MediaServer->Freeswitch进行通信，Freeswitch推送RTP\n流到SBC，SBC播放音频到用户话机。\n同时Freeswitch->MediaServer->callserver->IVR通知放音结束\n9、若mk-robotagent模块返回结果的动作是放音，若放音文件文件名为空或者不\n存在，则会使用TTS放音。\nIVR->callserver->MediaServer->Freeswitch->MrcpServer->TTS引擎推送放音的文\n本内容，TTS引擎将文本内容转换为语音文件，向MrcpServer返回转换后的音\n频，MrcpServer->Freeswitch->SBC推送RTP流，SBC播放转换后的音频到用户\n话机。同时Freeswitch->MediaServer->callserver->IVR通知放音结束\n10、用户听完机器人放音后做出回复\nIVR->callserver->MediaServer->Freeswitch->MrcpServer->ASR引擎推送用户回\n答，ASR引擎识别用户语音内容转换为文本返回给MrcpServer，\nMrcpServe->Freeswitch->MediaServer->callserver->IVR返回转换后的文本，IVR\n再将转写文本返回到NLP引擎的mk-robotagent模块，重复2-15步骤，直到通话\n结束。\n11、待通话结束后，IVR会向NLP引擎的mk-robotagent模块发送挂机请求，\nmk-robotagent模块会返回通话的录音文件名、挂机原因等通话信息，IVR再向\nMarsMgr的yc-stdgw模块发送录音文件名、挂机原因等通话信息。",
        "metadata": {
          "parent_path": [
            "大模型机器人业务流程"
          ],
          "full_path": [
            "大模型机器人业务流程",
            "FREESWITCH场景"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "HMP场景",
        "content": "6.2HMP场景\n6.2.1业务流程图\n大模型机器人业务流程描述：\n1、机器人外呼任务发起，ocs_cloud将外呼呼通客户后，ocs_cloud将先启动主流程ocsivrmainflow，主流程通过Mars传来的业务子流程名(传参)，启动相应业务对应的机器人通用子流程robotcall。\n2、在robotcall流程中，IVR先向NLP引擎的mk-robotagent模块传入用户文本（IVR流程里默认为“通用机器人”），mk-robotagent模块将用户文本发送给robotengine模块，robotengine模块将用户文本发送给mkrobotplugin模块，在mkrobotplugin模块通过关键词跟话术处理用户意图：是否匹配大模型机器人的知识库（知识库知识通过faqgateway模块同步到大模型）\n3、如用户话术匹配大模型知识库中的问答知识，mkrobotplugin模块去请求大模型，提取问答知识对应的答案内容+Prompt指令中的主题话术返回给mkrobotplugin模块\n4、如用户话术匹配大模型知识库中的文档知识，mkrobotplugin模块去请求大模型，提取到文档中相关答案+Prompt指令中的主题话术返回给mkrobotplugin模块\n5、如用户话术未能匹配到机器人知识库，mkrobotplugin模块去请求大模型，大模型根据根据Prompt指令生成合适的话术内容返回给mkrobotplugin模块\n6、mkrobotplugin模块最终将结果返回给robotengine模块，robotengine模块将结果返回给mk-robotagent模块，mk-robotagent模块将结果返回给IVR\n7、IVR向MarsMgr的yc-stdgw模块发送机器人对话内容、机器人营销状态（用于云电销的监控等页面的展示）。\n8、若mk-robotagent模块返回结果的动作是放音，若放音文件存在，则播放音频文件，若放音文件文件名为空或者不存在，则IVR会使用TTS放音（TTS播放的文本内容为音频文件的内容），ttsgeteway网关会请求到MRCPServer，MRCP Server再请求到TTS引擎，将文本转换为音频，MRCPServer将转换后的音频发送给MediaServer，MediaServer进行放音。用户听完机器人放音后做出回复，IVR调用ASRGateway网关将接收到的用户回答向MRCPServer请求识别用户的回答，MRCPServer再向ASR引擎发起转写请求，转写完成后，MRCPServer再将从ASR引擎获取到的文本内容返回给ASRGateway，ASRGateway将识别后的文本返回给IVR。IVR再将该文本发送给NLP引擎的mk-robotagent模块，重复2-19的步骤，直到通话结束。\n9、待通话结束后，IVR会向NLP引擎的mk-robotagent模块发送挂机请求，mk-robotagent模块会返回通话的录音文件名、挂机原因等通话信息，IVR再向MarsMgr的yc-stdgw模块发送录音文件名、挂机原因等通话信息",
        "metadata": {
          "parent_path": [
            "大模型机器人业务流程"
          ],
          "full_path": [
            "大模型机器人业务流程",
            "HMP场景"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "新增数据库与数据源",
        "content": "7.1新增数据库与数据源\n7.1.1新建mysql数据库\n新增数据库并命名为robot\n语音机器人安装手册\n第22页共115页\n右击点击robot库，选择“运行SQL文件”，选择MySQL全量脚本（即\ninstall_mysql_20230203整合版.sql，需根据数据库版本选择数据库脚本），点击\n“开始”按钮\n在robot库运行创建任务视图的脚本，即install_mysql_view_20220422.sql（需\n根据数据库版本选择数据库脚本）\n语音机器人安装手册\n第23页共115页\n7.1.2新建达梦数据库\n1.新增一个普通用户mkrobot，并赋予操作权限\n赋予的权限请根据现场实际情况进行修改，确保有执行脚本的权限；\n语音机器人安装手册\n第24页共115页2.新建用户mkrobot后，会默认自动创建一个名为mkrobot的模式；重建新建一个连\n接，使用mkrobot用户进行登录；\n3.重新登录后，在mkrobot用户的终端下手动执行语音机器人的建库脚本。\n7.1.3在MarsNode新增数据源\n访问MarsNode的控制台，在“数据源管理”页面点击“新增数据源”。\n新增机器人数据源，数据源名称为robot（可任意命名，不一定为robot），\n配置数据库类型、数据库IP等信息后，点击“测试连接”，连接成功后，点击\n“保存”按钮，如下图所示。\n语音机器人安装手册\n第25页共115页",
        "metadata": {
          "parent_path": [
            "安装步骤"
          ],
          "full_path": [
            "安装步骤",
            "新增数据库与数据源"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "NLP引擎部署及配置模块",
        "content": "7.2NLP引擎部署及配置模块\n7.2.1语音机器人引擎配置\n在NLP引擎部署语音机器人相关的模块。\n7.2.1.1上传war包\n将faqgateway.war、mk-robotagent.war、mk-robotapi.war、、mkrobotplugin.war放到robot应用的webapps目录下。\n7.2.1.2上传ROBOT-DS.xml并修改配置\n将ROBOT-DS.xml上传到robot应用的/resource/config/jdbc目录下。\n输入viROBOT-DS.xml，根据下图的说明修改配置。\n需要修改的配置：\n<connection-url>jdbc:mysql://配置数据库IP:端口/robot</connection-url>\n<user-name>配置数据库账号</user-name>\n<password>配置数据库密码</password>\n7.2.1.3上传mkrobotplugin.xml并修改配置\n将mkrobotplugin.xml上传至robot应用的/resource/config目录下。\n输入vimkrobotplugin.xml，根据下图的说明修改配置。Redis配置根据实际进行修改，所有营销机器人相关的redis要使用相同的下标，并且不能和其他产品使用相同的下标。\n需要修改的配置：\n<paramkey=\"question_url\"name=\"问卷网关url\"type=\"String\"description=\"问卷网关url\"value=\"http://问卷模块IP:端口/yc-questionnaire/api\"></param>\n（注意：若xml文件没有\"question_url\"配置项则无需配置。）\n<paramkey=\"REDIS_IP\"name=\"Redis的ip\"type=\"String\"description=\"Redis的ip\"value=\"配置Redis的IP\"></param>\n<paramkey=\"REDIS_PORT\"name=\"Redis的端口\"type=\"String\"description=\"Redis的端口\"value=\"配置Redis的端口\"></param>\n<paramkey=\"REDIS_PWD\"name=\"Redis的密码\"type=\"String\"description=\"Redis的密码\"value=\"配置Redis的密码\"></param>\n<paramkey=\"REDIS_DATA_BASE\"name=\"Redis的库下标0~15\"type=\"String\"description=\"Redis的库下标0~15\"value=\"配置Redis的下标，默认为3（无需修改）\"></param>\n<paramkey=\"PASSWORD_CHECK\"name=\"是否需要redis密码验证\"type=\"String\"description=\"1表示启动，其他表示不启动\"value=\"Redis使用密码验证则配置为1，不使用密码配置为0\"></param>\n<paramkey=\"REDIS_TYPE\"name=\"redis环境,0单点，1集群，2哨兵\"type=\"String\"description=\"redis环境,0单点，1集群，2哨兵\"value=\"配置Redis的环境类型，0为单点模式，1为集群模式，2为哨兵模式\"></param>",
        "metadata": {
          "parent_path": [
            "安装步骤"
          ],
          "full_path": [
            "安装步骤",
            "NLP引擎部署及配置模块"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "Mars部署及配置模块",
        "content": "7.3MARS部署及配置模块.................................................................................................................37\n7.3.1部署及配置mk-robotmgr.war............................................................................................38\n7.3.1.1部署应用....................................................................................................................................38\n7.3.1.2修改配置....................................................................................................................................39\n7.3.2部署及配置mk-robotext.war.............................................................................................44\n7.3.2.1部署应用....................................................................................................................................44\n7.3.3部署及配置mk-robothelp.war...........................................................................................45\n7.3.3.1部署应用....................................................................................................................................45\n7.3.3.2修改配置....................................................................................................................................46\n7.3.4部署及配置scanningFailedData.war.................................................................................47\n7.3.4.1运行SQL脚本...........................................................................................................................47\n7.3.4.2部署应用....................................................................................................................................48\n7.3.4.3修改配置....................................................................................................................................49\n7.3.5部署及配置mk-robotvue.war............................................................................................50\n6.3.5.1部署应用.......................................................................................................................................50\n7.3.6部署及配置aliyunttstool.war.............................................................................................51\n7.3.6.1部署应用....................................................................................................................................51\n语音机器人安装手册\n第52页共115页7.3.6.2修改配置....................................................................................................................................52",
        "metadata": {
          "parent_path": [
            "安装步骤"
          ],
          "full_path": [
            "安装步骤",
            "Mars部署及配置模块"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "卡片机器人配置",
        "content": "8.1卡片机器人配置\n8.1.1登录语音机器人管理系统\n访问语音机器人管理系统（http://IP:端口/mk-robotvue/#/login，IP和端口为MarsNode的IP和端口），使用超级管理员账号（例如admin@ekf）登录，输入账号、密码、验证码后，点击“登录”按钮，在弹窗点击“登录”按钮。\n即可进入语音机器人管理系统。\n8.1.2新增机器人\n新增机器人，配置机器人名称、流程名，机器人类型为“外呼机器人”。流程名和要通用机器人外呼子流程IVR流程名称一致！\n8.1.3上传录音文件\n(1)将流程中机器人回复的内容生成语音文件。\n若MarsNode的mk-robotmgr模块的阿里云参数配置正确，且MarsNode可以访问公网，则可以使用语音机器人的TTS工具将文本生成语音文件。\n若使用的是本地私有阿里云TTS，部署参考\n使用语音机器人的TTS工具将文本生成语音文件，操作步骤如下：\n将流程中的机器人语音内容提取存放到excel文件\n将excel的表格上传,输入验证码点击提交，会自动生成录音文件\n(2)将生成的语音文件以及描述语音文件的Excel文件放到同一个文件夹，并将其压缩成zip文件\n压缩后的录音文件如下：\n录音文件.zip\n(3)在“语音文件”页面导入语音文件\n也可上传单个语音文件\n8.1.4配置卡片\n(1)进入流程管理页面\n在“机器人”页面，点击机器人的“流程管理”\n(2)新增播音卡片\n在机器人的流程管理页面，点击“播音卡片”\n在“播音卡片”页面新增流程中需要用到的播音卡片。\n新增完成后的效果如下：\n(3)新增“1.欢迎语”卡片\n新增普通卡片，卡片名名称为：1.欢迎语，语音内容选择：你好，我是智能客服小优，请问有什么可以帮您。如ETC办理、救援。\n在“1.欢迎语”卡片中点击“+”按钮新增流程信息。\n分别新增名称为“ETC办理”和“救援”的流程信息。\n为“ETC办理”和“救援”的流程信息分别增加话术，ETC办理话术为：ETC办理等（即用户的话术均可），救援话术为：救援等（即用户的话术均可）。\n点击“1.欢迎语”卡片的“保存”按钮。\n(4)新增“2.个人办/单位办”卡片\n卡片名称为：2.个人办/单位办（根据业务名称取名即可），语音内容选择：请问您是个人办理还是单位办理。\n在“2.个人办/单位办”卡片中点击“+”按钮新增流程信息，分别新增名称为“个人办理”和“单位办理”的流程信息，并新增话术。\n分别在“动作”选择对应的播音卡片，在“跳转”选择“流程结束”\n点击“2.个人办/单位办”卡片的“保存”按钮。\n(5)在“1.欢迎语”卡片配置跳转卡片\n选择“1.欢迎语”卡片，在“ETC办理”流程中让其跳转至卡片2个人办/单位办；“救援”流程让先播放播音卡片并为其转人工。“转人工配置”需要配置“跳转”（按需配置），否则会保存失败。\n点击“1.欢迎语”卡片的“保存”按钮。\n8.1.5训练\n在机器人的“接入场景”页面，点击“训练”按钮。\n8.1.6测试\n点击“接入场景”页面右下角的“训练”图标\n在训练弹窗第一句输入任意内容，待收到机器人回复后按设计的流程输入，若机器人按设计流程回复，则机器人流程正常。",
        "metadata": {
          "parent_path": [
            "机器人外呼业务配置（自测）"
          ],
          "full_path": [
            "机器人外呼业务配置（自测）",
            "卡片机器人配置"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "磐石配置",
        "content": "8.2磐石配置\n8.2.1IVR流程配置\n8.2.1.1上传IVR流程\n将三个IVR流程放置到“文件服务器”设置的路径，该路径要挂载到IVR以及MediaServer所在的服务器。\nIVR流程在版本服务器的这三个路径下拿取\n8.2.1.2配置IVR流程\n机器人外呼主流程ocsivrmainflow\n在“流程配置”页面，新增ocsivrmainflow流程\n“文件服务器”需选择IVR流程放置的文件服务器，流程文件、流程配置文件、流程路径要和IVR文件一致。\n点击“下一步”，绑定IVR节点，点击“完成”。\n在“IVR节点”页面，点击对应的IVR节点，勾选流程，点击“加载”按钮。\n流程ini文件无需修改。\n通用机器人外呼子流程AISales\n新增AISales流程和新增ocsivrmainflow流程类似，只是流程配置内容不同，流程配置内容如下：\n流程ini文件配置：\nvoxpath：卡片机器人提示音存放路径，即mk-robotmgr模块配置的【语音文件保存路径】，路径结尾不需要加’/’\nsVoiceGWUrl：卡片机器人网关接口URL，格式http://IP:端口/mk-robotagent/ivrinterface，IP和端口为NLP的IP和端口\nsaleResultGW：MarsMGR侧yc-stdgw所在的IP及它监听的端口\nsAgentPrefix：ICCS模块配置的【席间三方/咨询字冠】\nengineName：ASRGateway模块的站点号（十进制）\niccsstationno：ICCS模块的站点号（十进制）\nbreakflow_toagent：静默坐席接管人机对话流程名称\n静默坐席接管人机对话breakflow_toagent流程\n新增breakflow_toagent流程和新增ocsivrmainflow流程类似，只是流程配置内容不同，流程配置内容如下：\n流程ini文件配置：\nentvoxpath：企业欢迎语及排队音的根目录\nsAgentPrefix：ICCS模块配置的【席间三方/咨询字冠】\niccsstationno：ICCS模块的站点号（十进制）\n8.2.2模块配置\n8.2.2.1OCS_Cloud模块配置\nOCS_Cloud模块的自定义数据配置：\n业务网关：磐石数据网关的地址，用于取外呼数据，格式如：http://IP:端口/petradatagw/interface，IP和端口为MarsMGR的IP和端口\nIVR业务流程字冠：机器人任务使用的IVR流程字冠\n其它配置项请使用默认值或根据实测情况进行调整。\n8.2.2.2ASRGateway模块配置\nASRGateway的自定义数据配置：\n配置“ASR引擎驱动类型”：NUANCE\nASRGateway的高级配置：\n配置“是否使用MRCP语音识别”：使用\n配置“本地MRCP客户端使用的IP地址”：为ASRGateway所在机器的IP\n配置“本地MRCP客户端监听的开始端口”：为ASRGateway所在机器的端口（不要有端口冲突）\n选择“默认对接MRCP服务器”：ali（按需配置）\n配置MRCP服务器的IP地址集：MRCP服务器地址，多个地址间用“|”分隔\n配置MRCP服务器监听的SIP端口集：MRCP服务器SIP端口，多个端口间用“|”分隔\n其它配置项请使用默认值或根据实测情况进行调整。\n8.2.2.3TTS模块配置\nTTS的高级属性中配置：\n配置“编码格式”：CF_ALAW\n配置“语音文件数据头格式”：默认44字节\n配置“是否使用MRCPTTS”：使用\n配置“本地MRCP客户端使用的IP地址”：TTS模块所在机器的IP\n配置“本地MRCP客户端监听的开始端口”：TTS模块所在机器的端口\n配置MRCP服务器的IP地址：MRCP服务器地址\n配置MRCP服务器的端口：MRCP服务器监听端口\n配置“本地MRCP客户端数目”：根据阿里授权情况填写相应的并发TTS请求数目\n其它配置项请使用默认值或根据实测情况进行调整。\n8.2.2.4MediaServer模块配置\nMediaServer的高级属性中配置：\nASR识别模式：MRCP模式\n其它配置项请使用默认值或根据实测情况进行调整。\n8.2.3字冠配置\n新增机器人任务使用的IVR流程字冠，【字冠号码】要和OCS_Cloud模块的【IVR业务流程字冠】一致，关联机器人外呼主流程ocsivrmainflow\n字冠的路由为对应的IVR路由。\n新增后需要加载字冠：勾选要加载的字冠，点击“加载”按钮。",
        "metadata": {
          "parent_path": [
            "机器人外呼业务配置（自测）"
          ],
          "full_path": [
            "机器人外呼业务配置（自测）",
            "磐石配置"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "Mars配置",
        "content": "8.3Mars配置\n8.3.1企业配置机器人\n访问MarsMgr云呼后台管理系统，点击“企业管理--企业列表”，点击要使用语音机器人的企业名称。\n在企业配置页面，点击“机器人模板”的“详情”按钮。\n在企业机器人模板管理页面新增机器人。\n新增弹窗的机器人ID、机器人名称要和语音机器人配置的一致。\n新增弹窗的流程名要和通用机器人外呼子流程的名称一致。\n8.3.2配置客户资料模板\n登录美云销系统：访问http://ip:端口（IP和端口分别是MarsNode的IP和端口），输入账号和密码，点击登录，在弹窗选择“云电销(基础版)”。\n在“客户资料--模板管理”页面新增客户资料模板。\n注意：勾选了的字段才会显示在模板里。\n8.3.3配置机器人外呼任务\n在“任务管理--机器人任务”页面新增机器人外呼任务。",
        "metadata": {
          "parent_path": [
            "机器人外呼业务配置（自测）"
          ],
          "full_path": [
            "机器人外呼业务配置（自测）",
            "Mars配置"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "FAQ",
        "content": "10FAQ\n10.1业务系统的语音机器人菜单无法显示\n问题描述：\n已在Mars的云呼运营管理中心将语音机器人菜单挂到云电销/云客服，但在云电销/云客服看不到语音机器人菜单。\n问题定位：\n将menu.sql脚本导入mars主库后部分菜单的“资源状态”为“其它”，导致前台无法看到菜单。\n解决办法：\n需将语音机器人的全部一级、二级、三级菜单的“资源状态”修改为“正常”。\n10.2语音机器人的“数据报表”没有数据\n问题描述：\n已经存在语音机器人的外呼数据，但是在语音机器人管理系统的“数据报表”页面看不到呼叫记录。\n问题定位：\n缺少部分操作步骤。\n解决办法：\n(1)创建任务视图：在语音机器人库（robot）执行install_mysql_view_20220422.sql（若已执行，则忽略该步骤）；\n(2)在语音机器人系统配置数据模板\n机器人配置为机器人外呼任务关联的机器人，提参信息、客户信息中的字段要和云电销机器人外呼任务配置的客户资料模板的参数一致。\n例如：在客户资料模板中配置“字段名称”为“性别”且启动，则可在语音机器人系统对应的数据模板新增“性别”的字段。\n(3)机器人外呼，通话结束后查看“数据报表”页面，存在呼叫数据。\n10.3语音机器人的“数据报表”没有外呼失败的数据\n问题描述：\n已存在机器人外呼失败的数据，但是在语音机器人管理系统的“数据报表”页面看不到外呼失败的记录。\n问题定位：\n没有部署scanningFailedData模块，或者没有执行部分配置。\n解决办法：\n(1)确保执行了update_mysql20211207云电销修改脚本.sql（若数据库为oracle，则执行update_oracle_20211207云电销脚本.sql）；\n(2)确保在MarsNode已经安装scanningFailedData模块，且配置的【企业编号】（即在9059看到的企业ID）正确；\n(3)MarsNode的mk-robotmgr模块的【板扫描失败数据状态】配置为1；\n(4)机器人外呼任务关联的机器人，它的数据模板开启了扫描失败数据；\n(5)机器人外呼，用户不接听；\n(6)30分钟后查看“数据报表”（外呼失败扫描网关会有30分钟的延迟），存在外呼失败的数据。\n10.4语音机器人播放不了通话录音\n问题描述：\n在语音机器人管理系统的“数据报表”页面，查看某条记录的聊天记录，播放按钮无法点击。\n问题定位：\n查看MarsNode的mk-robotmgr模块【通话录音文件地址】配置的目录没有录音文件，以及查看查看录音文件的后缀名。\n解决办法：\n(1)将磐石产生的录音文件目录挂载到MarsNode的mk-robotmgr模块的【通话录音文件地址】配置的目录。例如磐石录音文件在172.16.10.1的/home/fileserver/records，mk-robotmgr模块的【通话录音文件地址】配置为：/home/fileserver/recordfile_wav/，则在MarsNode的机器执行如下命令：mount-tnfs172.16.10.1:/home/fileserver/records/home/fileserver/recordfile_wav\n(2)若录音文件后缀名为wav，则需要将wav填写到MarsNode的mk-robotmgr模块的【录音文件后缀】，多个后缀用英文逗号隔开。\n10.5机器人外呼，转人工失败\n问题描述：\n机器人外呼，用户接听，走到转人工的流程，但是转人工失败，自动挂机。\n问题定位：\n查看ivr日志，GetAgent的返回结果中groupid=0\n解决办法：\n机器人外呼任务中配置技能组。\n10.6语音机器人播音卡片的音频文件存在，但IVR使用TTS放音\n问题描述：\nIVR流程到达播放语音机器人某个播音卡片的流程，该播音卡片对应的音频文件存在（在播音卡片页面能正常播放），但是IVR没有播放该音频，而是使用TTS放音。\n问题定位：\n在IVR和MediaServer所在的机器，播音卡片的音频文件不存在。查看IVR日志，若AccessFile的返回值为Failed则表示音频文件不存在\n解决办法：\n需要将语音机器人的音频文件（mk-robotmgr模块配置的【语音文件保存路径】）挂载到AISales.ini配置的voxpath目录\n例如：MarsNode的IP为192.168.10.2，mk-robotmgr模块配置的【语音文件保存路径】配置为/home/fileserver/voicefile，AISales.ini配置的voxpath目录配置为/home/fileserver/voicefile，则需要在IVR和MediaServer所在的机器执行：mount-tnfs192.168.10.2:/home/fileserver/voicefile/home/fileserver/voicefile\n注意：AISales.ini配置的voxpath目录最后不要加“/”，否则IVR放音的放音路径会多了“/”，例如目录为/home/mkrobot_music，则voxpath=/home/mkrobot_music（不要配置为voxpath=/home/mkrobot_music/）\n10.7机器人会话监控页面没有实时监控到会话\n问题描述：\n语音机器人外呼，用户接听，正在通话中时查看语音机器人系统的“会话监控”页面，查看不到通话记录。\n解决办法：\n检查MarsNode的mk-robotext、mk-robothelp、mk-robotmgr以及NLP的mk-robotagent.xml、mk-robotapi.xml、mkrobotplugin.xml、faqgateway.xml的redis配置是否一致且正确。\n会话监控正常时的显示。",
        "metadata": {
          "parent_path": [],
          "full_path": [
            "FAQ"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      },
      {
        "title": "版本修订批准记录",
        "content": "【历次版本修订记录，版本修订描述重要说明】提交日期版本号 版本修订描述 作者批准人2023-04-28V1.0首次发布 李楚茵2023-04-28V1.1增加了对Redis不同模式的配置参考、NLP的xml文件配置增加了文字描述李楚茵2023-05-08V1.21.环境准备中数据库的建议版本改为Mysql8；2.新建robot库时排序规则改为utf8mb4_general_ci（大小写不敏感）；3.安装包简介新增不再使用pycorrection模块的mkrobotplugin模块版本；4.语音机器人的类型改为“外呼机器人”。李楚茵2023-06-29V1.31、修改了redis集群模式中的端口 李楚茵2023-07-11V1.41、章节6.2.2新增百度unit机器人对接2、章节6.3.5新增mk-robotvue.war部署3、章节6.4.1新增菜单属性关系表：新增批量测试、asr配置菜单以及简版机器人菜单雷思思2023-11-20V1.51、语音机器人后台登录入口改为http://node:port/mk-robotvue/#/login2、章节6.4mars菜单重新配置增加独立业务挂载跟其他平台业务挂载方式（菜单路径全部整改）3、章节6.3.6新增阿里私有云tts语音合成模块部署方式雷思思2025-06-06V1.61、新增章节9大模型机器人配置 雷思思2025-06-26V1.71、新增章节6大模型机器人业务流程2、章节4.4安装包简介中增加aliyunttstool模块说明雷思思注：版本修订批准记录，如不需要可删除此页.",
        "metadata": {
          "parent_path": [],
          "full_path": [
            "版本修订批准记录"
          ],
          "source_file": "sample_doc/云趣运维文档1754623245145/语音机器人安装手册V1.7.pdf.txt"
        }
      }
    ]
  }
}